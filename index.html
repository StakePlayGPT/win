<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Stake Play</title>

  <!-- PWA -->
  <link rel="manifest" href="/win/manifest.json">
  <meta name="theme-color" content="#000000">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/win/sw.js').catch(console.error);
    }
  </script>

  <style>
    :root {
      --bg:#0b0b0c; --card:#131316; --line:#23232a; --fg:#fff; --muted:#9aa0a6; --accent:#22c55e;
    }
    *{box-sizing:border-box}
    body{
      margin:0; min-height:100vh; display:flex; align-items:center; justify-content:center;
      background:var(--bg); color:var(--fg); font-family:system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif;
    }
    .wrap{padding:24px; width:min(560px,100%)}
    .card{
      background:var(--card); border:1px solid var(--line); border-radius:16px; padding:24px;
      text-align:center; box-shadow:0 12px 30px rgba(0,0,0,.35);
    }
    h1{margin:0 0 8px;font-size:28px}
    p{margin:0 0 20px;color:var(--muted)}
    .btn{
      display:inline-block; padding:12px 18px; border-radius:10px; text-decoration:none; font-weight:600;
    }
    .btn-primary{background:var(--accent); color:#0b0b0c}
    /* –ë–ê–ù–ù–ï–†-–ü–û–î–°–ö–ê–ó–ö–ê */
    .a2hs{
      position:fixed; left:12px; right:12px; bottom:12px; z-index:50;
      background:#15151a; border:1px solid var(--line); color:var(--fg); border-radius:14px;
      padding:12px 14px; display:none; gap:12px; align-items:flex-start;
      box-shadow:0 10px 24px rgba(0,0,0,.35);
    }
    .a2hs.visible{display:flex}
    .a2hs .txt{font-size:14px; color:#d9d9de}
    .a2hs .muted{color:var(--muted)}
    .a2hs .actions{margin-left:auto; display:flex; gap:8px}
    .a2hs button{padding:8px 12px; border-radius:10px; border:1px solid var(--line); background:#1b1b20; color:#fff; cursor:pointer}
    .a2hs .ok{background:var(--accent); color:#0b0b0c; border-color:#149a49}
    .a2hs .close{background:#25252b}
    .hint-steps{margin:.3rem 0 0; line-height:1.45}
    .icon-share{display:inline-block; width:14px; height:14px; border:2px solid currentColor; border-radius:3px; position:relative; top:2px; margin:0 3px}
    .icon-share::after{content:"‚Üë"; position:absolute; left:2px; top:-8px; font-weight:700; font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Stake Play</h1>
      <p>Accesso rapido ai segnali e ai giochi üéÆ</p>
      <a class="btn btn-primary" href="https://t.me/tuobot">–û—Ç–∫—Ä—ã—Ç—å –≤ Telegram</a>
    </div>
  </div>

  <!-- –ë–∞–Ω–Ω–µ—Ä –ø–æ–¥—Å–∫–∞–∑–∫–∏ (iOS/Android) -->
  <div id="a2hs" class="a2hs" role="region" aria-live="polite">
    <div class="txt" id="a2hs-text">
      <!-- —Å—é–¥–∞ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç—Å—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è -->
    </div>
    <div class="actions">
      <button id="a2hs-install" class="ok" style="display:none">–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      <button id="a2hs-close" class="close">–ó–∞–∫—Ä—ã—Ç—å</button>
    </div>
  </div>

  <script>
    (function(){
      const banner = document.getElementById('a2hs');
      const text   = document.getElementById('a2hs-text');
      const btnInstall = document.getElementById('a2hs-install');
      const btnClose   = document.getElementById('a2hs-close');

      const ua = navigator.userAgent.toLowerCase();
      const isIOS = /iphone|ipad|ipod/.test(ua);
      const isAndroid = /android/.test(ua);
      const isStandalone = window.matchMedia('(display-mode: standalone)').matches || navigator.standalone === true;

      // –°–∫—Ä—ã—Ç—å –±–∞–Ω–Ω–µ—Ä –Ω–∞–≤—Å–µ–≥–¥–∞ –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è
      const KEY = 'a2hs_dismissed_v1';
      if (localStorage.getItem(KEY)) return;

      let deferredPrompt = null;

      // ANDROID: –ª–æ–≤–∏–º beforeinstallprompt –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É ¬´–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å¬ª
      window.addEventListener('beforeinstallprompt', (e) => {
        e.preventDefault();
        deferredPrompt = e;
        if (!isStandalone && isAndroid) {
          text.innerHTML = `
            <div><b>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (Android)</b></div>
            <div class="hint-steps">
              –ù–∞–∂–º–∏ –∫–Ω–æ–ø–∫—É <b>–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</b> –Ω–∏–∂–µ.<br>
              –ï—Å–ª–∏ –±–∞–Ω–Ω–µ—Ä –Ω–µ –ø–æ—è–≤–∏–ª—Å—è: –æ—Ç–∫—Ä–æ–π –º–µ–Ω—é <b>‚ãÆ</b> ‚Üí <b>–î–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω</b>.
            </div>
          `;
          btnInstall.style.display = 'inline-block';
          banner.classList.add('visible');
        }
      });

      btnInstall.addEventListener('click', async () => {
        if (!deferredPrompt) return;
        deferredPrompt.prompt();
        try { await deferredPrompt.userChoice; } catch(_) {}
        deferredPrompt = null;
        banner.classList.remove('visible');
        localStorage.setItem(KEY, '1');
      });

      // iOS: –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —Ç–µ–∫—Å—Ç–æ–≤—É—é –ø–æ–¥—Å–∫–∞–∑–∫—É
      if (isIOS && !isStandalone) {
        text.innerHTML = `
          <div><b>–ö–∞–∫ –¥–æ–±–∞–≤–∏—Ç—å –Ω–∞ –≥–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω (iPhone)</b></div>
          <div class="hint-steps">
            1) –ù–∞–∂–º–∏ <span class="icon-share" aria-hidden="true"></span> <b>¬´–ü–æ–¥–µ–ª–∏—Ç—å—Å—è¬ª</b> –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞.<br>
            2) –í—ã–±–µ—Ä–∏ <b>¬´–ù–∞ —ç–∫—Ä–∞–Ω ‚Äú–î–æ–º–æ–π‚Äù¬ª</b>.<br>
            3) –ù–∞–∂–º–∏ <b>¬´–î–æ–±–∞–≤–∏—Ç—å¬ª</b>.
          </div>
          <div class="muted">–ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ —Å–∞–π—Ç –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ‚Äî –±–µ–∑ –∞–¥—Ä–µ—Å–Ω–æ–π —Å—Ç—Ä–æ–∫–∏.</div>
        `;
        banner.classList.add('visible');
      }

      // –ó–∞–∫—Ä—ã—Ç—å
      btnClose.addEventListener('click', () => {
        banner.classList.remove('visible');
        localStorage.setItem(KEY, '1');
      });

      // –ï—Å–ª–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É–∂–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ ‚Äî –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –±–∞–Ω–Ω–µ—Ä
      window.addEventListener('appinstalled', () => {
        banner.classList.remove('visible');
        localStorage.setItem(KEY, '1');
      });
    })();
  </script>
</body>
</html>
